# {{ ansible_managed }}
# Log2Ram Configuration for Proxmox VE
# Last modified: {{ ansible_date_time.iso8601 }}
#
# Note: This configuration manages RAM-based logging to reduce disk I/O and extend SSD lifespan.
# Warning: Ensure sufficient RAM is available before increasing the size.

# RAM Disk Configuration
# -----------------------------------------------------------------------------
# Size of the RAM folder (e.g., 128M, 256M)
SIZE={{ proxmox_logging.ram_size }}

# Mount Points
# -----------------------------------------------------------------------------
# Path to store logs on disk
PATH_DISK=/var/log

# Mount point for RAM disk
PATH_RAM={{ proxmox_logging.ram_mount }}

# Synchronization Settings
# -----------------------------------------------------------------------------
# Use rsync instead of cp for better performance
USE_RSYNC=true

# Compression Settings
# -----------------------------------------------------------------------------
# Compression algorithm: zstd (recommended), lz4, none
COMP_ALG={{ 'zstd' if proxmox_logging.ram_compress else 'none' }}

# Additional Paths
# -----------------------------------------------------------------------------
# Space-separated list of additional paths to create in RAM
FOLDERS="{{ proxmox_logging.paths | join(' ') }}" 
